<!DOCTYPE html><!--  Last Published: Wed Jul 02 2025 12:15:55 GMT+0000 (Coordinated Universal Time)  -->
<html data-wf-page="685996de362613655dd70340" data-wf-site="685996de362613655dd702b4">
<head>
  <meta charset="utf-8">
  <title>Cart Drawers</title>
  <meta content="Cart Drawers" property="og:title">
  <meta content="Cart Drawers" property="twitter:title">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <link href="../../css/normalize.css" rel="stylesheet" type="text/css">
  <link href="../../css/components.css" rel="stylesheet" type="text/css">
  <link href="../../css/next-staging-core.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
  <script type="text/javascript">
      WebFont.load({
        google: {
          families: ["Lato:100,100italic,300,300italic,400,400italic,700,700italic,900,900italic", "Montserrat:100,100italic,200,200italic,300,300italic,400,400italic,500,500italic,600,600italic,700,700italic,800,800italic,900,900italic"]
        }
      });
    </script>
  <script type="text/javascript">
      ! function(o, c) {
        var n = c.documentElement,
          t = " w-mod-";
        n.className += t + "js", ("ontouchstart" in o || o.DocumentTouch && c instanceof DocumentTouch) && (n.className += t + "touch")
      }(window, document);
    </script>
  <link href="../../images/favicon.png" rel="shortcut icon" type="image/x-icon">
  <link href="../../images/webclip.png" rel="apple-touch-icon">
  <meta name="next-api-key" content="kLGpgEfCX3iUZG16hpI5zrCH9qxcOdahDY1im6ud">
  <!--  DNS prefetch for faster API calls  -->
  <link rel="dns-prefetch" href="//campaigns.apps.29next.com">
  <link rel="dns-prefetch" href="//cdn-countries.muddy-wind-c7ca.workers.dev">
  <!--  Preload modules for faster loading  -->
  <script type="module">
      const qs = new URLSearchParams(location.search);
      const isDebug = qs.get('debug') === 'true';
      const DEV_HOST = 'http://localhost:3000';
      const PROD_HOST = 'https://campaign-cart-v2.pages.dev';
      const DEV_ENTRY_PATH = '/src/index.ts';
      const PROD_ENTRY_PATH = '/index.es.js';
      const sdkUrl = isDebug ? DEV_HOST + DEV_ENTRY_PATH : PROD_HOST + PROD_ENTRY_PATH;
      // Preload the SDK module
      const link = document.createElement('link');
      link.rel = 'modulepreload';
      link.href = sdkUrl;
      document.head.appendChild(link);
    </script>
  <!--  Enhanced SDK loader with parallel initialization  -->
  <script type="module">
      const qs = new URLSearchParams(location.search);
      const isDebug = qs.get('debug') === 'true';
      const DEV_HOST = 'http://localhost:3000';
      const PROD_HOST = 'https://campaign-cart-v2.pages.dev';
      const DEV_ENTRY_PATH = '/src/index.ts';
      const PROD_ENTRY_PATH = '/index.es.js';
      const sdkUrl = isDebug ? DEV_HOST + DEV_ENTRY_PATH : PROD_HOST + PROD_ENTRY_PATH;
      // Store start time for performance tracking
      window.tn29StartTime = performance.now();
      // Check if data is already cached
      const hasCampaignCache = !!sessionStorage.getItem('next-campaign-cache');
      const hasLocationCache = !!sessionStorage.getItem('next_country_location_data');
      // Start data preloading immediately (before SDK loads)
      const configData = {
        apiKey: document.querySelector('meta[name="next-api-key"]')?.content,
        ...window.nextConfig
      };
      // Preload critical data if we have config
      let dataPreloadPromise = null;
      if (configData.apiKey) {
        const preloadTasks = [];
        // Only preload campaign if not cached
        if (!hasCampaignCache) {
          preloadTasks.push(
            fetch('https://campaigns.apps.29next.com/api/v1/campaigns/', {
              headers: {
                'Authorization': configData.apiKey
              }
            })
            .then(r => r.ok ? r.json() : null)
            .then(data => {
              if (data) {
                const cacheData = {
                  campaign: data,
                  timestamp: Date.now(),
                  apiKey: configData.apiKey
                };
                sessionStorage.setItem('next-campaign-cache', JSON.stringify(cacheData));
                console.log('üíæ Campaign data preloaded and cached');
              }
              return data;
            })
            .catch(() => null)
          );
        }
        // Only preload location if not cached
        if (!hasLocationCache) {
          preloadTasks.push(
            fetch('https://cdn-countries.muddy-wind-c7ca.workers.dev/location')
            .then(r => r.ok ? r.json() : null)
            .then(data => {
              if (data) {
                const cacheData = {
                  data,
                  timestamp: Date.now()
                };
                sessionStorage.setItem('next_country_location_data',
                  JSON.stringify(cacheData));
                console.log('üíæ Location data preloaded and cached');
              }
              return data;
            })
            .catch(() => null)
          );
        }
        // Only create promise if we have tasks to run
        if (preloadTasks.length > 0) {
          dataPreloadPromise = Promise.all(preloadTasks);
        }
      }
      try {
        // Load SDK in parallel with data preloading - NO ARTIFICIAL DELAY
        const [sdk] = await Promise.all([
          import(sdkUrl),
          dataPreloadPromise || Promise.resolve()
        ]);
        // Make SDK available globally
        window.NextCommerce = sdk;
        // Performance tracking
        const loadTime = performance.now() - window.nextStartTime;
        if (isDebug) {
          // Dev mode helpers
          window.nextDebug = {
            loadTime: `${loadTime.toFixed(2)}ms`,
            cartStore: () => import(`${DEV_HOST}/src/stores/cartStore.ts`)
              .then(m => m.useCartStore.getState()),
            configStore: () => import(`${DEV_HOST}/src/stores/configStore.ts`)
              .then(m => m.useConfigStore.getState()),
            campaignStore: () => import(`${DEV_HOST}/src/stores/campaignStore.ts`)
              .then(m => m.useCampaignStore.getState()),
            performance: {
              loadTime,
              dataPreloaded: !!dataPreloadPromise,
              cacheHits: performance.getEntriesByType('navigation')[0]
            }
          };
          console.log('üöÄ Next Commerce Campaign-Cart SDK v0.1 ‚Äî DEV build loaded');
          console.log(`‚ö° Load time: ${loadTime.toFixed(2)}ms`);
          console.log('üí° Try nextDebug.cartStore() or nextDebug.performance');
        } else {
          console.log('üöÄ Next Commerce Campaign-Cart SDK v0.1 ‚Äî ES Module loaded');
          if (loadTime > 500) {
            console.warn(`‚ö†Ô∏è Slow load detected: ${loadTime.toFixed(2)}ms`);
          }
        }
        // Emit ready event with performance data
        window.dispatchEvent(new CustomEvent('next:ready', {
          detail: {
            loadTime,
            version: '0.1.0'
          }
        }));
      } catch (error) {
        console.error('Failed to load ES module:', error);
        if (!isDebug) {
          console.log('üîÑ Attempting fallback loading...');
        }
      }
    </script>
  <!--  Optimized fallback for older browsers  -->
  <script nomodule="">
      const script = document.createElement('script');
      script.src = 'https://campaign-cart-v2.pages.dev/index.umd.js';
      script.async = true;
      script.onload = function() {
        console.log('üöÄ Next Commerce Campaign-Cart SDK v0.1 ‚Äî UMB fallback ready');
        window.dispatchEvent(new CustomEvent('next:ready', {
          detail: {
            fallback: true,
            version: '0.1.0'
          }
        }));
      };
      script.onerror = function() {
        console.error('‚ùå Failed to load SDK - please contact support');
      };
      document.head.appendChild(script);
    </script>
  <!-- <link rel="stylesheet" href="https://campaign-cart-v2.pages.dev/style.css"> -->
  <style>
      body {
        -webkit-font-smoothing: antialiased;
        -moz-font-smoothing: antialiased;
        -o-font-smoothing: antialiased;
      }
      /*Text Selection Color*/
      ::selection {
        background: #d14424;
        color: #fff;
      }
      ::-moz-selection {
        background: #d14424;
        color: #fff;
      }
      .test-mode-indicator {
        display: none !important;
      }
    </style>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css">
  <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/gsap.min.js"></script>
</head>
<body>
  <div class="w-embed">
    <style>
        /* Additional design mode specific styles */
        html.wf-design-mode pageblock-cart {
          pointer-events: all !important;
        }
        html.wf-design-mode [data-pb-cart="drawer"] {
          transform: translateX(0) !important;
          visibility: visible !important;
        }
        html.wf-design-mode [data-pb-cart="overlay"] {
          opacity: 1 !important;
          visibility: visible !important;
        }
      </style>
  </div>
  <div class="page-wrapper">
    <div class="styleguide_guide_wrap">
      <div class="component-counter w-embed">
        <style>
            html:not(.wf-design-mode) .styleguide_guide_wrap {
              display: none;
            }
            .styleguide_guide_layout {
              counter-reset: gridguides;
            }
            .styleguide_guide_layout>div::before {
              counter-increment: gridguides;
              content: counter(gridguides);
            }
            /* Set up the counter */
            .main-wrapper {
              counter-reset: component-counter;
            }
            /* Style for component-wrapper */
            .component-wrapper {
              position: relative;
            }
            /* Add numbering to component-wrapper elements only in design mode */
            html.wf-design-mode .main-wrapper .component-wrapper::before {
              counter-increment: component-counter;
              content: "Component " counter(component-counter);
              position: absolute;
              top: 10px;
              right: 10px;
              font-weight: bold;
              color: #000;
              background-color: #fff;
              border: 1px dashed #000;
              padding: 5px 10px;
              border-radius: 0px;
              font-size: 12px;
              z-index: 1;
            }
            /* Optional: Additional styling for component-wrapper in design mode */
            html.wf-design-mode .main-wrapper .component-wrapper {
              padding: 2rem 1.25rem;
              margin-bottom: 0px;
            }
          </style>
      </div>
      <div class="bz-grids w-embed">
        <style>
            .bz-vertical {
              position: absolute;
              left: 0%;
              top: auto;
              right: 0%;
              bottom: auto;
              z-index: 1;
              height: 180vh !important;
              border-color: rgba(0, 0, 0, 0.1);
              border-right-style: solid;
              border-right-width: 0.5px;
              border-left-style: solid;
              border-left-width: 0.5px;
              pointer-events: none;
              cursor: auto;
            }
            .bz-horizontal {
              position: absolute;
              left: auto;
              top: auto;
              right: auto;
              bottom: auto;
              border-color: rgba(0, 0, 0, 0.1);
              z-index: 1;
              width: 180vw !important;
              height: 100%;
              border-top-style: solid;
              border-top-width: 0.5px;
              border-bottom-style: solid;
              border-bottom-width: 0.5px;
              pointer-events: none;
              cursor: auto;
            }
            .frame__corner {
              position: absolute;
              width: 24px;
              height: 24px;
              z-index: 10;
            }
            .frame__corner::before,
            .frame__corner::after {
              content: '';
              position: absolute;
              background-color: #000;
            }
            .frame__corner::before {
              left: 0;
              right: 0;
              height: 0.5px;
              top: 50%;
              transform: translateY(-50%);
            }
            .frame__corner::after {
              top: 0;
              bottom: 0;
              width: 0.5px;
              left: 50%;
              transform: translateX(-50%);
            }
            .frame__corner--top-left {
              top: 0;
              left: 0;
              transform: translate(-50%, -50%);
            }
            .frame__corner--bottom-right {
              bottom: 0;
              right: 0;
              transform: translate(50%, 50%);
            }
          </style>
      </div>
      <div class="bz-components w-embed">
        <style>
            .bz-component {
              display: none !important;
            }
            .component-holders {
              padding: none !important;
            }
          </style>
      </div>
    </div>
    <div class="pageblock-styles">
      <div class="next-styles w-embed"><!--  For development on webflow  -->
        <link href="http://localhost:3000/src/styles/main.css" rel="stylesheet" type="text/css">
      </div>
    </div>
    <main class="main-wrapper"><pageblock-cart>
        <div data-pb-cart="overlay" class="pb-overlay"></div>
        <div aria-modal="true" role="dialog" data-pb-cart="drawer" class="pb-drawer">
          <div class="pb-drawer__header">
            <div class="pb_styleguide-wrapper-ui cc-auto">
              <div>Pageblock:Cart:Header</div>
            </div>
          </div>
          <div class="pb-drawer__content">
            <div class="pb_styleguide-wrapper-ui">
              <div class="text-block-366">Pageblock:Cart:Content</div>
              <div class="pb-styuleguide_wrapper-new">
                <div class="pb_styleguide-wrapper-ui cc-auto">
                  <div>Pageblock:Cart:Group</div>
                </div>
                <div class="pb_styleguide-wrapper-ui cc-auto">
                  <div>Pageblock:Cart:Group</div>
                </div>
              </div>
            </div>
          </div>
          <div class="pb-drawer_footer">
            <div class="pb_styleguide-wrapper-ui cc-auto">
              <div>Pageblock:Cart:Footer</div>
            </div>
          </div>
        </div>
        <div data-pb-cart="trigger" class="styleguide-drawer">
          <div>Open Drawer</div>
        </div>
        <div class="custom-code w-embed w-script">
          <style>
              [data-pb-cart="item"]:last-child {
                border-bottom: none;
              }
              [data-pb-cart="overlay"].cc-active {
                opacity: 1;
                visibility: visible;
                cursor: pointer;
              }
              [data-pb-cart="drawer"] {
                box-shadow: -5px 0 30px rgba(0, 0, 0, 0);
              }
              [data-pb-cart="drawer"].cc-active {
                transform: translateX(0);
                box-shadow: -5px 0 30px rgba(0, 0, 0, 0.15);
              }
            </style>
          <script>
              document.addEventListener('DOMContentLoaded', function() {
                // Initialize cart functionality
                initializeCart();
              });
              function initializeCart() {
                // Get all trigger elements that might open the drawer
                const triggers = document.querySelectorAll('[data-pb-cart="trigger"]');
                const drawer = document.querySelector('[data-pb-cart="drawer"]');
                const overlay = document.querySelector('[data-pb-cart="overlay"]');
                const closeButtons = document.querySelectorAll('[data-pb-cart="close"]');
                // Handle trigger clicks
                triggers.forEach(trigger => {
                  trigger.addEventListener('click', (e) => {
                    e.preventDefault();
                    openDrawer();
                  });
                });
                // Handle close button clicks
                closeButtons.forEach(button => {
                  button.addEventListener('click', (e) => {
                    e.preventDefault();
                    closeDrawer();
                  });
                });
                // Handle overlay clicks
                if (overlay) {
                  overlay.addEventListener('click', (e) => {
                    e.preventDefault();
                    closeAllDialogs();
                  });
                }
                function openDrawer() {
                  if (drawer) drawer.classList.add('cc-active');
                  if (overlay) overlay.classList.add('cc-active');
                  document.body.style.overflow = 'hidden'; // Prevent background scrolling
                }
                function closeDrawer() {
                  if (drawer) drawer.classList.remove('cc-active');
                  if (overlay) overlay.classList.remove('cc-active');
                  document.body.style.overflow = ''; // Restore scrolling
                }
                function closeAllDialogs() {
                  // Remove cc-active class from all elements with role="dialog"
                  const dialogs = document.querySelectorAll('[role="dialog"]');
                  dialogs.forEach(dialog => {
                    dialog.classList.remove('cc-active');
                  });
                  // Also close overlay
                  if (overlay) overlay.classList.remove('cc-active');
                  document.body.style.overflow = ''; // Restore scrolling
                }
                // Optional: Handle ESC key to close drawer
                document.addEventListener('keydown', (e) => {
                  if (e.key === 'Escape') {
                    closeAllDialogs();
                  }
                });
              }
            </script>
        </div>
      </pageblock-cart></main>
  </div>
  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=685996de362613655dd702b4" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="../../js/next-staging-core.js" type="text/javascript"></script>
</body>
</html>